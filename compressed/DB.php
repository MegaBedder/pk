<?php class DB{function DB($a){$this->c=$a;}function column($a,$b=NULL,$c=0){if($d=$this->query($a,$b))return$d->fetchColumn($c);}function row($a,$b=NULL){if($c=$this->query($a,$b))return$c->fetch();}function fetch($a,$b=NULL){if($c=$this->query($a,$b))return$c->fetchAll();}function query($a,$b=NULL){$c=$this->c->prepare(self::$a[]=strtr($a,'`',$this->i));$c->execute($b);return$c;}function insert($a,$b){$c=$this;$d="INSERT INTO `$a`(`".implode('`,`',array_keys($b)).'`)VALUES('.rtrim(str_repeat('?,',count($b=array_values($b))),',').')';return$c->p?$c->column($d.'RETURNING `id`',$b):($c->query($d,$b)?$c->c->lastInsertId():NULL);}function update($a,$b,$c){$d="UPDATE `$a` SET `".implode('`=?,`',array_keys($b)).'`=? WHERE '.(is_array($c)?$this->where($c,$b):$c);if($e=$this->query($d,array_values($b)))return$e->rowCount();}function delete($a,$b){$c;if($d=$this->query("DELETE FROM `$a` WHERE ".(is_array($b)?$this->where($b,$c):$b),$c))return$d->rowCount();}function where($a,&$b){$c;foreach($a as$d=>$e){$c[]="`$d`=?";$b[]=$e;}return join(' AND ',$c);}}